<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
     integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
     crossorigin="anonymous" referrerpolicy="no-referrer">
    <!--<link rel="stylesheet" href="master.css">-->
    <style>
        body
        {
            margin: 0;
            background-color: #f0f0f0;
        }
        #head div
        {
            display: flex;
        }
        #head
        {
            padding: 0 100px;
            background-color: #8080ff;
            width: 100%;
            height: 42px;
            box-sizing: border-box;
            display: flex;
            justify-content: space-between;
        }
        #wiki_name, #head div:first-child a
        {
            line-height: 42px;
            text-align: center;
            color: white;
            text-decoration: none;
        }
        #wiki_name, #head div:first-child a[href="/license"]
        {
            margin-right: 50px;
            
        }
        #search *
        {
            margin: 0;
            padding: 0;
            height: 42px;
            box-sizing: border-box;
            min-width: 42px;
            border-radius: 0;
            border: #808080 solid 1px;
            box-shadow: none;
            line-height: 40px;
        }
        /*#search *:not([name="search_query"])
        {
            box-sizing: content-box;
        }*/
        #search [name="search_query"]
        {
            padding: 4px 8px;
            box-sizing: border-box;
        }
        #search
        {
            display: flex;
        }
        i
        {
            border: 0 !important;
        }
        #foot div
        {
            margin-left: 50px;
        }
        #user
        {
            width: 42px;
            height: 42px;
        }
        #content
        {
            margin: 5px 50px;
        }
        table.border, table.border th, table.border td
        {
            border: 1px solid black;
            border-collapse: collapse;
        }
        .danger, .ok, .normal
        {
            border: 0;
            height: 30px;
            padding: 1px 13px;
        }
        .danger, .ok
        {
            color: white;
            border: 0;
            height: 30px;
            padding: 1px 13px;
        }
        .danger
        {
            background-color: #d9534f;
        }
        .ok
        {
            background-color: #0275d8;
        }
        .alert
        {
            width: 100%;
            background-color: #aacdec;
            border-width: 1px;
            border-color: #c9c9c9;
            border-radius: .25rem;
            border-style: solid;
            padding: 12px;
        }
        .block
        {
            display: block;
        }
        .inline
        {
            display: inline;
        }
        a
        {
            text-decoration: none;
            color: #0275d8;
        }
        a:active
        {
            color: red;
        }
        #modal_background
        {
            background-color: #000000;
            width: 100%;
            height: 100%;
            opacity: 0.5;
            position: fixed; 
        }
        .modal
        {
            position: fixed;
            top: 40%;
            left: 30%;
            width: 40%;
            box-sizing: border-box;
            background-color: #ffffff;
            z-index: 1;
            padding: 1%;
            display: none;
        }
        .title
        {
            color: #303030;
            margin: 0;
        }
        .button_like_link
        {
            border: none;
            padding: 0;
            font-size: 1em;
            background: none;
            display: inline;
            color: #0275d8;
        }
        .danger[disabled], .ok[disabled]
        {
            cursor: not-allowed;
            opacity: 0.65;
        }
        .nomargin
        {
            margin: 0;
        }
        </style>
    {% block css %}{% endblock %}
    <title>{{ wiki_title }}</title>
</head>
<body>
    <div id="modal_background" style="display: none;"></div>
    {% block outcontent %}{% endblock %}
    <div id="head">
        <div>
            <div id="wiki_name">
                <a href="/">{{ wiki_name }}</a></div>
            <a href="/license">LICENSE</a>
            {% if isowner %}
            <a href="/owner_tool">관리 도구</a>
            {% endif %}
        </div>
        <div>
            <form id="search" action="/search" method="get"> <!-- 검색 창 -->
                <button type="button">
                    <i class="fa-solid fa-shuffle"></i>
                </button>
                <input type="text" name="search_query">
                <button type="submit">
                    <i class="fa-solid fa-magnifying-glass"></i>
                </button>
                <button type="button">
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
            </form>
            <button id="user">
                <i class="fa-solid fa-user"></i>
            </button>
        </div>
    </div>
    <div id="content">
        {% block content %}{% endblock %}
    </div>
    <div id="foot">
        <hr>
        <div>
            NewTheSeed {{ version }}
        </div>
    </div>
    <script>
        function closeModal(id) {
            document.getElementById(id).style.display = "none"
            document.getElementById("modal_background").style.display = "none"
        }
        function openModal(id) {
            document.getElementById(id).style.display = "block"
            document.getElementById("modal_background").style.display = "block"
        }
        document.querySelector("#head div:nth-child(2) form button:nth-child(4)").addEventListener("click", function () {
            location.href = `/w/${encodeURI(document.querySelector("#head div:nth-child(2) form input").value)}`
        })
        document.querySelector("#user").addEventListener("click", function () {
            location.href = '/user'
        })
        document.querySelectorAll(".confirm:not(.refresh-on-submit)").forEach(function (b) {
            b.addEventListener("submit", function (e) {
                if (!confirm("msg" in this.dataset ? this.dataset["msg"] : "계속하시겠습니까?")) {
                    e.preventDefault();
                }
            })
        })
        document.querySelectorAll(".refresh-on-submit").forEach(function (form) {
            form.addEventListener("submit", function (e) {
                e.preventDefault();
                if (this.classList.contains("confirm")) {
                    if (!confirm("msg" in this.dataset ? this.dataset["msg"] : "계속하시겠습니까?")) {
                        return
                    }
                }
                fetch(this.action, {method: this.method, body: new FormData(this)})
                .then(function (r) {
                    if (r.ok) {
                        location.reload()
                    }
                    else {
                        if (r.status === 400 && r.headers.get("Content-Type").startsWith("text/plain")) {
                            r.text().then(function (err) {
                                alert(err)
                            })
                        }
                        else {
                            alert(`Request failed with status code ${r.status}`)
                        }
                    }
                })
            })
        })
    </script>
    {% block js %}{% endblock %}
</body>
</html>
